<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Consistency ‚Äì Tasks</title>

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;margin:0;padding:0}

/* üé® PINK THEME */
:root{
  --pink-main:#ec4899;
  --pink-dark:#be185d;
  --pink-soft:#fbcfe8;
  --pink-light:#fdf2f8;
  --text:#3f3f46;
}

body{
  font-family:'Poppins',sans-serif;
  min-height:100vh;
  background:
    radial-gradient(900px 500px at 10% 0%, rgba(236,72,153,.25), transparent 60%),
    radial-gradient(700px 400px at 90% 90%, rgba(251,207,232,.35), transparent 60%),
    var(--pink-light);
  color:var(--text);
}

/* üíñ HEADER */
header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:18px 32px;
  background:rgba(255,255,255,.65);
  backdrop-filter:blur(12px);
  border-bottom:1px solid var(--pink-soft);
  position:relative;
  flex-wrap:wrap;
}

.brand{
  display:flex;
  align-items:center;
  gap:12px;
}

.logo{
  width:36px;
  height:36px;
  border-radius:10px;
  background:linear-gradient(135deg,#ec4899,#f472b6);
  transform:rotate(45deg);
}

.brand h1{
  font-size:22px;
  font-weight:700;
  color:var(--pink-dark);
}

/* üå∏ NAV */
nav{
  display:flex;
  gap:12px;
}

nav button{
  padding:8px 18px;
  border-radius:22px;
  border:none;
  background:transparent;
  font-size:14px;
  cursor:pointer;
  color:var(--pink-dark);
  transition:.3s;
}

nav button:hover{
  background:var(--pink-soft);
}

/* HAMBURGER MENU */
.hamburger{
  display:none;
  flex-direction:column;
  justify-content:space-between;
  width:25px;
  height:18px;
  cursor:pointer;
}

.hamburger div{
  height:3px;
  background:#be185d;
  border-radius:2px;
}

/* üìù WRAPPER */
.wrapper{
  max-width:720px;
  margin:50px auto;
  padding:0 24px;
}

.task-card{
  background:rgba(255,255,255,.85);
  backdrop-filter:blur(14px);
  border-radius:22px;
  padding:28px;
  box-shadow:0 20px 45px rgba(236,72,153,.25);
  max-height:700px;
  overflow-y:auto;
}

/* üìÖ TOP */
.top{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:22px;
}

.top h2{
  font-size:18px;
  font-weight:700;
  color:var(--pink-dark);
}

input[type="date"]{
  padding:8px 12px;
  border-radius:12px;
  border:1px solid var(--pink-soft);
  font-family:'Poppins';
}

/* ‚úÖ TASK */
.task{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:14px 0;
  border-bottom:1px solid #fce7f3;
}

.task-left{
  display:flex;
  align-items:center;
  gap:12px;
}

.task-left span{
  font-size:14px;
}

.task input[type="checkbox"]{
  accent-color:var(--pink-main);
}

.task button{
  background:none;
  border:none;
  cursor:pointer;
  font-size:16px;
  color:var(--pink-dark);
}

/* üéØ ACCURACY */
.accuracy{
  margin-top:24px;
  padding:14px;
  border-radius:14px;
  background:linear-gradient(135deg,#fbcfe8,#fdf2f8);
  text-align:center;
  font-weight:700;
  color:var(--pink-dark);
}

/* ‚úèÔ∏è MODAL */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.45);
  display:none;
  align-items:center;
  justify-content:center;
}

.modal-box{
  background:white;
  width:90%;
  max-width:360px;
  padding:22px;
  border-radius:20px;
  box-shadow:0 20px 45px rgba(236,72,153,.3);
}

.modal-box input{
  width:100%;
  padding:10px;
  margin-bottom:16px;
  border-radius:12px;
  border:1px solid var(--pink-soft);
  font-family:'Poppins';
}

.modal-actions{
  display:flex;
  gap:12px;
}

.modal-actions button{
  flex:1;
  padding:10px;
  border:none;
  border-radius:14px;
  cursor:pointer;
  font-weight:700;
}

.all{
  background:var(--pink-main);
  color:white;
}

.today{
  background:#fce7f3;
  color:var(--pink-dark);
}

/* üì± MOBILE */
@media(max-width:500px){
  nav{
    display:none;
    flex-direction:column;
    position:absolute;
    top:60px;
    right:10px;
    background:rgba(255,255,255,0.95);
    border-radius:10px;
    box-shadow:0 8px 20px rgba(0,0,0,0.15);
    padding:10px 0;
  }

  nav.active{
    display:flex;
  }

  .hamburger{
    display:flex;
  }
}
</style>
</head>

<body>

<header>
  <div class="brand">
    <div class="logo"></div>
    <h1>Consistency</h1>
  </div>

  <div class="hamburger" id="hamburger">
    <div></div>
    <div></div>
    <div></div>
  </div>

  <nav id="navMenu">
    <button onclick="location.href='index.html'">Home</button>
    <button onclick="location.href='graph.html'">Graph</button>
    <button onclick="location.href='garden.html'">Garden</button>
    <button onclick="location.href='balance.html'">Balance</button>
  </nav>
</header>

<div class="wrapper">
  <div class="task-card">

    <div class="top">
      <h2>Daily Tasks</h2>
      <input type="date" id="date">
    </div>

    <div id="tasks"></div>

    <div class="accuracy">
      Accuracy: <span id="acc">0%</span>
    </div>

  </div>
</div>

<!-- ‚úèÔ∏è MODAL -->
<div class="modal" id="modal">
  <div class="modal-box">
    <input id="editInput" placeholder="Edit task">
    <div class="modal-actions">
      <button class="all" onclick="applyAll()">All Days</button>
      <button class="today" onclick="applyToday()">Today Only</button>
    </div>
  </div>
</div>

<script>
// Hamburger menu toggle
const hamburger = document.getElementById('hamburger');
const navMenu = document.getElementById('navMenu');
hamburger.addEventListener('click', () => {
  navMenu.classList.toggle('active');
});

// TASK LOGIC
const TOTAL = 15; // 15 tasks
const tasksEl = document.getElementById('tasks');
const accEl = document.getElementById('acc');
const dateEl = document.getElementById('date');
const modal = document.getElementById('modal');
const editInput = document.getElementById('editInput');

let editIndex=null;
let taskNames=JSON.parse(localStorage.getItem('taskNames'))||
Array.from({length:TOTAL},(_,i)=>`Task ${i+1}`);
let dayOverrides=JSON.parse(localStorage.getItem('dayOverrides'))||{};
let progress=JSON.parse(localStorage.getItem('yearTasks'))||{};
let state=Array(TOTAL).fill(false);

function currentNames(){
  return(dateEl.value&&dayOverrides[dateEl.value])?
  dayOverrides[dateEl.value]:taskNames;
}

function render(){
  tasksEl.innerHTML='';
  currentNames().forEach((name,i)=>{
    const d=document.createElement('div');
    d.className='task';
    d.innerHTML=`
      <div class="task-left">
        <input type="checkbox" data-i="${i}">
        <span>${name}</span>
      </div>
      <button onclick="openEdit(${i})">‚úèÔ∏è</button>`;
    tasksEl.appendChild(d);
  });
  loadDay();
}

function openEdit(i){
  if(!dateEl.value){alert('Select date first');return;}
  editIndex=i;
  editInput.value=currentNames()[i];
  modal.style.display='flex';
}

function applyAll(){
  taskNames[editIndex]=editInput.value;
  localStorage.setItem('taskNames',JSON.stringify(taskNames));
  closeModal();
}

function applyToday(){
  const d=dateEl.value;
  dayOverrides[d]=[...currentNames()];
  dayOverrides[d][editIndex]=editInput.value;
  localStorage.setItem('dayOverrides',JSON.stringify(dayOverrides));
  closeModal();
}

function closeModal(){
  modal.style.display='none';
  render();
}

tasksEl.addEventListener('change',e=>{
  if(!dateEl.value){e.target.checked=false;alert('Select date');return;}
  state[e.target.dataset.i]=e.target.checked;
  update();
});

dateEl.addEventListener('change',render);

function update(){
  accEl.textContent=
  Math.round(state.filter(Boolean).length/TOTAL*100)+'%';
  progress[dateEl.value]=[...state];
  localStorage.setItem('yearTasks',JSON.stringify(progress));
}

function loadDay(){
  state=progress[dateEl.value]||Array(TOTAL).fill(false);
  document.querySelectorAll('input[type=checkbox]')
  .forEach((c,i)=>c.checked=state[i]);
  update();
}

render();
</script>

</body>
</html>
