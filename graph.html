<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Consistency Graph</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
}

body{
  font-family:'Poppins', sans-serif;
  min-height:100vh;
  background:
    radial-gradient(900px 500px at 20% 0%, rgba(255,182,193,.35), transparent 60%),
    radial-gradient(700px 400px at 90% 90%, rgba(255,200,215,.35), transparent 60%),
    #fff5f8;
  color:#3f3f46;
}

/* HEADER */
header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:18px 20px;
  background:rgba(255,255,255,.65);
  backdrop-filter:blur(12px);
  border-bottom:1px solid #fbcfe8;
  position:sticky;
  top:0;
  z-index:1000;
}

.brand{
  display:flex;
  align-items:center;
  gap:12px;
}

.logo{
  width:36px;
  height:36px;
  border-radius:10px;
  background:linear-gradient(135deg,#ec4899,#f472b6);
}

.brand span{
  font-size:22px;
  font-weight:700;
  color:#be185d;
  letter-spacing:1px;
}

/* NAV */
nav{
  display:flex;
  align-items:center;
  gap:10px;
}

nav button{
  padding:8px 16px;
  border-radius:22px;
  border:none;
  background:transparent;
  font-weight:600;
  cursor:pointer;
  color:#be185d;
  transition:.3s;
}

nav button:hover{
  background:#fbcfe8;
}

/* HAMBURGER MENU */
.hamburger{
  display:none;
  flex-direction:column;
  justify-content:space-between;
  width:25px;
  height:18px;
  cursor:pointer;
}

.hamburger div{
  height:3px;
  background:#be185d;
  border-radius:2px;
}

/* MOBILE NAV */
@media(max-width:768px){
  nav{
    position:absolute;
    top:60px;
    right:0;
    background:rgba(255,255,255,0.95);
    flex-direction:column;
    width:160px;
    padding:10px 0;
    border-radius:12px;
    box-shadow:0 8px 20px rgba(0,0,0,0.15);
    display:none;
  }

  nav.active{
    display:flex;
  }

  .hamburger{
    display:flex;
  }
}

/* WRAPPER */
.wrapper{
  max-width:1000px;
  margin:40px auto;
  padding:0 20px;
  text-align:center;
}

.wrapper h2{
  margin-bottom:24px;
  font-weight:600;
  color:#be185d;
  letter-spacing:1px;
}

/* GRAPH CONTAINER */
.graph-container{
  width:100%;
  max-width:600px;
  height:260px;
  margin:0 auto;
  padding:14px;
  border-radius:18px;
  background:rgba(255,255,255,0.75);
  backdrop-filter:blur(12px);
  box-shadow:
    0 20px 40px rgba(255,105,135,0.25),
    inset 0 0 0 1px rgba(255,182,193,0.4);
}

/* MOBILE */
@media(max-width:600px){
  .graph-container{
    height:240px;
  }
}
</style>
</head>

<body>

<header>
  <div class="brand">
    <div class="logo"></div>
    <span>Consistency</span>
  </div>

  <div class="hamburger" id="hamburger">
    <div></div>
    <div></div>
    <div></div>
  </div>

  <nav id="navMenu">
    <button onclick="location.href='index.html'">Home</button>
    <button onclick="location.href='tasks.html'">Tasks</button>
    <button onclick="location.href='garden.html'">Garden</button>
    <button onclick="location.href='balance.html'">Balance</button>
  </nav>
</header>

<div class="wrapper">
  <h2>Daily Consistency Â· Full Year</h2>

  <div class="graph-container">
    <canvas id="consistencyChart"></canvas>
  </div>
</div>

<script>
// Hamburger toggle
const hamburger = document.getElementById('hamburger');
const navMenu = document.getElementById('navMenu');

hamburger.addEventListener('click', ()=>{
  navMenu.classList.toggle('active');
});

// Chart.js graph
const TOTAL_TASKS = 20;
const data = JSON.parse(localStorage.getItem('yearTasks')) || {};
const year = new Date().getFullYear();

let labels = [];
let dataset = [];

for(let m=0;m<12;m++){
  const days = new Date(year,m+1,0).getDate();
  for(let d=1;d<=days;d++){
    const date = `${year}-${String(m+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
    labels.push(`${m+1}/${d}`);
    const state = data[date] || [];
    dataset.push(state.filter(Boolean).length);
  }
}

const ctx = document.getElementById('consistencyChart').getContext('2d');
new Chart(ctx,{
  type:'line',
  data:{
    labels:labels,
    datasets:[{
      label:'Completed Tasks',
      data:dataset,
      borderColor:'#ec4899',
      backgroundColor:'rgba(236,72,153,0.25)',
      fill:true,
      pointRadius:2,
      tension:0.35
    }]
  },
  options:{
    responsive:true,
    maintainAspectRatio:false,
    plugins:{
      legend:{
        labels:{
          color:'#3f3f46',
          font:{size:12}
        }
      }
    },
    scales:{
      x:{
        ticks:{
          color:'#9ca3af',
          maxTicksLimit:18
        },
        grid:{display:false}
      },
      y:{
        beginAtZero:true,
        max:TOTAL_TASKS,
        ticks:{
          stepSize:5,
          color:'#9ca3af'
        },
        grid:{color:'rgba(0,0,0,0.04)'}
      }
    }
  }
});
</script>

</body>
</html>
